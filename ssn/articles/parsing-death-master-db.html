<!DOCTYPE html>
<html lang="en">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132187606-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-132187606-1');
</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-5845274709975922",
    enable_page_level_ads: true
  });
</script>


  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>NumChk: SSN Dataset Parsing DMDB</title>
  <meta name="The numbers checker" content="">
  <meta name="numchk" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– 
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">-->

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="../../css/normalize.css">
  <link rel="stylesheet" href="../../css/skeleton.css">
  <link rel="stylesheet" href="../../css/custom.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="../../img/favicon.png">

  <!-- scripts
  <script src="js/site.js"></script>
  <script src="js/jquery.min.js"></script>
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->

   
</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div id="t"></div>
            

<div class="container" style="margin-top: 0%">
    <div class="row"><div style="margin-top: 0%">
        The Death Master Database was analyzed with the following PERL script, hacked together to plow through ~10GB of raw text in just a few minutes.  A much better and more elegant program is possible, but this gets the job done for the purposes of numchk. Outline of the this page:<br>
        1. quick overview of the structure of the SSDI file and the data format
        2. screenshots available of the code because Visual Studio Code does a nice job of colorization.<br>
        3. Some annotation of the code for those that or just learning, or want to poke holes in the analysis<br>
        4. How the code was run with console redirect (>) operator for easy file output.<br>
        5. What the output looks like<br>
        6. Perl Code in txt form at the bottom for you to copy out if you want to use it.<br><Br>
        for an overview of the data being processed, see SSDI section in <a href=index.html>SSN Dataset</a><br>
        <img src="../../img/ssn-DMF.PNG" width=100%><br>
        <img src="../../img/ssdiraw.PNG" width=100%><br>
        <img src="../../img/ssnstats/DB-prog1.PNG" width=100%><br>
        <img src="../../img/ssnstats/DB-prog2.PNG" width=100%><br>
        <br>

        The program is run from the console as follows:<br>
        <b>C:\User\NumChk> perl parse.pl > output.csv</b><br>
        The dataset run had 3 files, so this was repeated once for each base file and results stored in a new output file. look at <b>Line 3</b> of the program and change the name to point to the datafile, run, change the name, run again. In Windows/DOS, the '>' is a console redirect so instead of putting results out on STDIO (screen) it shoves it in a file (output.csv) in the same directory the program is run from.
        <img src="../../img/ssnstats/parseoutput.PNG" width=100%><br>                                                                       
          
          


  
     <pre>
            use strict;
            use warnings;
             
            my $filename = 'ssdm3';  #time: takes 1:20 to run
            open(my $fh, '<:encoding(UTF-8)', $filename)
              or die "Could not open file '$filename' $!";
            our $i=0;
            our $last="start";
            our $oldestbirth=2020;
            our $newestbirth=0;
            our $oldestdeath=2020;
            our $newestdeath=0;
            our $oldestage=0;
            our $youngestage=150;
            our $totalage=0;
            our $totalbirth=0;
            our $totaldeath=0;
            while (my $row = <$fh>) {
              chomp $row;
              my $ssnbase=(substr $row, 1,3).("-").(substr $row, 4,2);
            
              if ($last eq "start"){$last = $ssnbase; }
              if ($ssnbase eq $last){$i++;}
              else {
                  my $avgage = int($totalage/$i);
                  my $avgbirthyr = int($totalbirth/$i);
                  my $avgdeathyr = int($totaldeath/$i);
                  # ssnblock, number found, 
                  #     001-01,     6397, 26,              83,         1969,           0000,           1898,           1924,            1925,            1981,           2013
                  #$SSNBlock,$count, $youngestage,$avgage,$oldestage,$oldestbirth,$avgbirthyr,$newestbirth,$oldestdeath,$avgdeathyr,newestdeath
                  print $last. ",".$i.",".$youngestage.",".$avgage.",".$oldestage.",".$oldestbirth.",".$avgbirthyr.",".$newestbirth.",".$oldestdeath.",".$avgdeathyr.",".$newestdeath."\n";
                  $i=1;
                  $last=$ssnbase;
                  $oldestbirth=2020;
                  $newestbirth=0;
                  $oldestdeath=2020;
                  $newestdeath=0;
                  $oldestage=0;
                  $youngestage=150;
                  $totalage=0;
                  $totalbirth=0;
                  $totaldeath=0;
                  }
              
              my $death = substr $row, 69,4;
              my $birth = substr $row, 77,4;
              if ($death < 1899){$death = 1899;} #unknown birth, unknown age, just put at 50
              if ($birth < 1850){$birth =  $death - 50;} #unknown birth, unknown age, just put at 50
              if ($death < $birth){$death = $oldestdeath;$birth = $oldestbirth;}
            
              my $age = $death - $birth;
              $totalage+=$age;
              $totalbirth+=$birth;
              $totaldeath+=$death;
               # if ($age > 110){print "age: ". $age. " death:" . $death . " birth: ". $birth. "\n";}
              if ($age > $oldestage){$oldestage = $age;}
              if ($age < $youngestage){$youngestage = $age;}
              if ($birth > $newestbirth){$newestbirth = $birth;}
              if ($birth < $oldestbirth){$oldestbirth = $birth;}
              if ($death > $newestdeath){$newestdeath = $death;}
              if ($death < $oldestdeath){$oldestdeath = $death;}
              
              #print $ssnbase."\n";
              #print "$row\n";
              #print $i;
              #print "\n";
              
            }
        </pre>                       


    <div class="row">
      <div class="one-half column" style="margin-top: 10%">
        <h4>NumChk</h4>
        <p>info@numchk.com</p>
  

      </div>
    </div>
  </div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script>var randompage3= parseInt(Math.random() * 899);
    var randompage2= parseInt(Math.random() * 99);
    if(randompage3 >99){}
    else if(randompage3 < 10){randompage3 = "00" + randompage3;}
    else {randompage3 = "0" + randompage3;}
    if(randompage2 >9){}
    else {randompage2 = "0" + randompage2;}
    var topp = '<div class="container" style="margin-top: 0%">\
<div class="four columns value-prop" align=center>\
\
<a href="/"><img src="../../img/trim256.png" width=100px><br>&nbsp;&nbsp;&nbsp;&nbsp;NumChk Home</a>\
</div>\
<div class="four columns value-prop">\
<img src="../../img/ssnold-blur-250.jpg" height=100px >\
</div>\
<div class="four columns value-prop" align=center>\
<br>\
<A href="../' + randompage3 + "-" + randompage2 + '-xxxx.html"><h1>SSN</h1>random SSN</a>\
</div>\
<div class="row" align=center>\
<h2>NumChk SSN Dataset State analysis</h2><hr>\
</div></div>'; 
   
    //top replace
    document.getElementById('t').innerHTML = topp;</script>    
</body>
</html>
